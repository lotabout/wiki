<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Max common string | Mark Wallace's vimwiki</title>
    <link rel="Stylesheet" type="text/css" href="assets/css/style.css" />
    <link rel="stylesheet" type="text/css" href="assets/google-code-prettify/prettify.css" >
    <!-- add more style sheets and javascripts -->
</head>
<body>
<!--<body onload="prettyPrint()">-->
<nav>
    <a href="index.html">Index</a>
    <a href="sitemap.html">SiteMap</a>
    <a href="https://lotabout.github.io">Blog</a>
    <a href="about.html">About</a>
</nav>

<div class="content">

<h1 id="toc_1">Max common string</h1>
<div class="toc">
<ul>
<li><a href="#toc_1">Max common string</a>
<ul>
<li><a href="#toc_1.1">Postfix-array</a>
</ul>
</ul>
</div>

<p>
This section consider about the following problem:
</p>

<p>
Given a string, find out a sub-string which repeats in the given string and
has the largest length.
</p>

<p>
For example: given:
"Ask not what your country <em>can do for you</em>, but what you
<em>can do for you</em> r country"
</p>

<p>
The longest is highlighted: "can do for you", and the second longest is "your
country".
</p>

<p>
First thought:
</p>
<pre>
for i = [0, n)
    for j = (i, n)
        cur_len = comlen(str[i], str[j])
        if (cur_len &gt; max_len)
            max_len = cur_len
            maxi = i
            maxj = j
</pre>

<p>
However this algorithm will take O(n^2) to run at least, under the situation
that <strong>comlen</strong> will take O(1) to run which however is not the case.
</p>

<h2 id="toc_1.1">Postfix-array</h2>
<p>
Consider the string "banana", we build an array, the i-th element of the array
is the postfix of the (i-1)-th element:
</p>

<p>
a[0] = "banana"
a[1] = "anana"
a[2] = "nana"
a[3] = "ana"
a[4] = "na"
a[5] = "a"
</p>

<p>
Now, if a sub-string repeats in the given <strong>string</strong>, then this sub-string will
appear in at least two of the postfix-array of <strong>string</strong>.
</p>

<p>
so, we can first sort the postfix-array of a given <strong>string</strong>.
=&gt;
a[0]: "a"
a[1]: "ana"
a[2]: "anana"
a[3]: "banana"
a[4]: "na"
a[5]: "nana"
</p>

<p>
then, just count the max common length of the abut array items:
</p>
<pre>
for i = [0, n)
    if comlen(a[i], a[i+1]) &gt; maxlen
        maxlen = comlen(a[i], a[i+1])
</pre>


<p>
<em>WHY WOULD THISWORK?</em>
Notice that in the original algorithm, what we are doing is actually count the
common length of str[i] and str[j] for all (0 &lt;= i,j &lt; len).
</p>

<p>
This of course will take O(n^2).
</p>

<p>
We have more information however. That means with the repeat string, we have
str[i] == str[j]. At least the start character of these sub-strings should be
the same.
</p>

<p>
Now we know that we've wasted a lot of time comparing sub-strings that don't
even have the same start character!
</p>

<p>
   aXXXXXXXXXXXXX
 -&gt; bXXXXXXX
</p>
<blockquote>
cXXXXXXXX
...
</blockquote>
<p>
 -&gt;       bXXXXXXXX
</p>

<p>
We want to compare these two strings begin with arrow directly.
</p>

<p>
Use recursive thinking, if the first characters are the same, we want to
compare strings with the same second characters.
</p>

<p>
So, we use <em>sort</em> to accomplish this. And it will cost O(n logn).
</p>

<p>
Lesson: we can use <em>sort</em> to avoid some useless comparing.
</p>

</div>

<hr class="comment">
<section class="comment">
<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        //var disqus_shortname = 'lotaboutvimwiki'; // required: replace example with your forum shortname
        var disqus_shortname = 'lotaboutlife'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

   
</section>

<footer>
    声明，本文采用<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">CC BY-NC-SA 3.0</a>授权。
</footer>


    <script src="assets/js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
        $('pre').addClass('prettyprint linenums') 
        prettyPrint()})
    </script>
    <script src="assets/google-code-prettify/prettify.js"></script>

    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
